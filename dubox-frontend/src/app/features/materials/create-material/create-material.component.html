<div class="create-material-page">
  <app-header></app-header>
  <div class="page-container">
    <app-sidebar></app-sidebar>
    
    <main class="main-content">
      <div class="page-header">
        <h1 class="page-title">Create New Material</h1>
      </div>

      <div class="form-container">
        <form [formGroup]="materialForm" (ngSubmit)="onSubmit()">
          <!-- Success Message -->
          <div *ngIf="successMessage" class="alert alert-success">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            {{ successMessage }}
          </div>

          <!-- Error Message -->
          <div *ngIf="error" class="alert alert-error">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 8v4M12 16h.01"/>
            </svg>
            {{ error }}
          </div>

          <div class="form-grid">
            <!-- Material Code -->
            <div class="form-group">
              <label for="materialCode">Material Code <span class="required">*</span></label>
              <input 
                type="text" 
                id="materialCode"
                formControlName="materialCode"
                class="form-control"
                [class.invalid]="materialForm.get('materialCode')?.invalid && materialForm.get('materialCode')?.touched"
                placeholder="e.g., MAT-001"
              />
              <div *ngIf="materialForm.get('materialCode')?.invalid && materialForm.get('materialCode')?.touched" class="error-text">
                Material code is required
              </div>
            </div>

            <!-- Material Name -->
            <div class="form-group">
              <label for="materialName">Material Name <span class="required">*</span></label>
              <input 
                type="text" 
                id="materialName"
                formControlName="materialName"
                class="form-control"
                [class.invalid]="materialForm.get('materialName')?.invalid && materialForm.get('materialName')?.touched"
                placeholder="e.g., Concrete Mix"
              />
              <div *ngIf="materialForm.get('materialName')?.invalid && materialForm.get('materialName')?.touched" class="error-text">
                Material name is required
              </div>
            </div>

            <!-- Category -->
            <div class="form-group">
              <label for="materialCategory">Category</label>
              <select 
                id="materialCategory"
                formControlName="materialCategory"
                class="form-control"
              >
                <option value="">Select Category</option>
                <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
              </select>
            </div>

            <!-- Unit -->
            <div class="form-group">
              <label for="unit">Unit</label>
              <select 
                id="unit"
                formControlName="unit"
                class="form-control"
              >
                <option value="">Select Unit</option>
                <option *ngFor="let unit of units" [value]="unit">{{ unit }}</option>
              </select>
            </div>

            <!-- Unit Cost -->
            <div class="form-group">
              <label for="unitCost">Unit Cost</label>
              <input 
                type="number" 
                id="unitCost"
                formControlName="unitCost"
                class="form-control"
                step="0.01"
                min="0"
                placeholder="0.00"
              />
            </div>

            <!-- Current Stock -->
            <div class="form-group">
              <label for="currentStock">Current Stock</label>
              <input 
                type="number" 
                id="currentStock"
                formControlName="currentStock"
                class="form-control"
                step="0.01"
                min="0"
                placeholder="0"
              />
            </div>

            <!-- Minimum Stock -->
            <div class="form-group">
              <label for="minimumStock">Minimum Stock</label>
              <input 
                type="number" 
                id="minimumStock"
                formControlName="minimumStock"
                class="form-control"
                step="0.01"
                min="0"
                placeholder="0"
              />
            </div>

            <!-- Reorder Level -->
            <div class="form-group">
              <label for="reorderLevel">Reorder Level</label>
              <input 
                type="number" 
                id="reorderLevel"
                formControlName="reorderLevel"
                class="form-control"
                step="0.01"
                min="0"
                placeholder="0"
              />
            </div>

            <!-- Supplier Name -->
            <div class="form-group full-width">
              <label for="supplierName">Supplier Name</label>
              <input 
                type="text" 
                id="supplierName"
                formControlName="supplierName"
                class="form-control"
                placeholder="e.g., ABC Suppliers"
              />
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn btn-secondary" (click)="onCancel()" [disabled]="loading">
              Cancel
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="loading || materialForm.invalid">
              <span *ngIf="loading">Creating...</span>
              <span *ngIf="!loading">Create Material</span>
            </button>
          </div>
        </form>
      </div>
    </main>
  </div>
</div>


